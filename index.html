<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Mini-Game</title>
<style>
body {
  margin:0; padding:0;
  font-family:'Comic Sans MS', cursive;
  background: linear-gradient(135deg, #ffdee9, #b5fffc, #fddde6);
  overflow:hidden;
  height:100vh;
  position:relative;
}

/* --- Floating emojis --- */
@keyframes float {
  0% { transform: translate(0,0) rotate(0deg); opacity: 0.6; }
  25% { transform: translate(10px,-30px) rotate(10deg); }
  50% { transform: translate(-10px,-60px) rotate(-10deg); }
  75% { transform: translate(5px,-90px) rotate(10deg); }
  100% { transform: translate(0,-120px) rotate(0deg); opacity:0; }
}
.floating-emoji {
  position:absolute;
  pointer-events:none;
  font-size:30px;
  opacity:0.6;
  animation-name: float;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  z-index:1;
}

/* --- Card styles --- */
.card {
  position:absolute;
  top:50%; left:50%;
  transform: translate(-50%,-50%);
  width:450px; padding:30px;
  background:#ffe6f0; border-radius:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
  text-align:center;
  z-index:2;
}
.card h1 { font-size:1.6rem; margin-bottom:10px; }
.card p { font-size:1.2rem; margin-bottom:20px; }
.button-container {
  position:relative; height:60px;
}
.button-container button {
  font-size:1rem;
  padding:10px 25px;
  border:none;
  border-radius:15px;
  cursor:pointer;
  position:absolute;
  top:0;
  transition: transform 0.2s ease, background 0.3s ease;
}
#yesBtn {
  background: linear-gradient(45deg,#ff8ec7,#b57fff);
  color:white; left:0;
  box-shadow:0 5px 10px rgba(0,0,0,0.2);
}
#noBtn {
  background:#ffcce0; color:#800040; right:0;
  box-shadow:0 5px 10px rgba(0,0,0,0.2);
  position:relative;
}

/* --- YES button magical floating --- */
@keyframes yesFloat {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}
#yesBtn.magical {
  animation: yesFloat 2s ease-in-out infinite;
}

/* YES button sparkles */
.yes-sparkle {
  position:absolute;
  pointer-events:none;
  font-size:16px;
  animation: float 2s linear infinite;
}

/* --- Hearts --- */
.heart {
  position:absolute;
  font-size:30px;
  cursor:pointer;
  user-select:none;
  transition: transform 0.2s ease;
  z-index:3;
}

/* --- Envelope --- */
#envelope {
  font-size:80px;
  cursor:pointer;
  transition: transform 0.5s ease;
}
#envelope.locked { filter: grayscale(80%); }

#counter {
  font-size:1.2rem;
  margin-bottom:15px;
}
</style>
</head>
<body>

<div id="floating"></div>

<!-- Mini-game -->
<div class="card" id="gameCard">
  <h1>Collect 20 hearts to unlock your envelope!</h1>
  <div id="counter">Hearts collected: 0 / 20</div>
</div>

<!-- Envelope -->
<div class="card" id="envelopeCard" style="display:none;">
  <div id="envelope" class="locked">ğŸ’Œ</div>
  <p>Click to open your Valentine!</p>
</div>

<!-- Valentine message -->
<div class="card" id="valentineCard" style="display:none;">
  <h1>ğŸ’• Camille Anndrea Julgan Lebico, will you be my Valentine? :3 - Josh Daz</h1>
  <p>my treat hehe :3</p>
  <div class="button-container">
    <button id="yesBtn">YES! ğŸ’–</button>
    <button id="noBtn">NO ğŸ™ƒ</button>
  </div>
</div>

<!-- Thank you card -->
<div class="card" id="thankCard" style="display:none;">
  <h1>Thank you so much! ğŸ€</h1>
  <p>I promise you wonâ€™t regret it. ğŸ’–</p>
</div>

<script>
// --- Optimized floating emojis ---
const floating = document.getElementById("floating");
const emojis = ['ğŸ’–','âœ¨','ğŸŒ¸','ğŸ’Œ','ğŸ±','ğŸ€','ğŸ¬','ğŸŒˆ','ğŸ˜»','ğŸ¶','ğŸ­','ğŸ¦„','ğŸ¥°','ğŸ’'];
const totalFloating = 30; // Reduced for performance
for(let i=0;i<totalFloating;i++){
  const e = document.createElement('div');
  e.className='floating-emoji';
  e.textContent = emojis[Math.floor(Math.random()*emojis.length)];
  e.style.left=Math.random()*window.innerWidth+'px';
  e.style.bottom=Math.random()*window.innerHeight+'px';
  e.style.fontSize=(Math.random()*20+20)+'px';
  e.style.animationDuration=(Math.random()*10+5)+'s';
  e.style.animationDelay=(Math.random()*5)+'s';
  floating.appendChild(e);
}

// --- Mini-game ---
const gameCard=document.getElementById("gameCard");
const envelopeCard=document.getElementById("envelopeCard");
const valentineCard=document.getElementById("valentineCard");
const thankCard=document.getElementById("thankCard");
const counterEl=document.getElementById("counter");
let heartsCollected=0;
const totalHearts=20;

function spawnHeart(){
  const heart=document.createElement("div");
  heart.className="heart";
  heart.textContent="ğŸ’–";
  heart.style.left=Math.random()*(window.innerWidth-50)+"px";
  heart.style.top=Math.random()*(window.innerHeight-50)+"px";
  document.body.appendChild(heart);

  let sway=(Math.random()*3-1.5), posY=parseFloat(heart.style.top);
  function drift(){
    posY -= 2; // faster
    heart.style.top = posY + 'px';
    heart.style.left = parseFloat(heart.style.left) + sway;
    sway += (Math.random()*0.3-0.15);
    if(posY < -50) {
      posY = window.innerHeight + 50;
      heart.style.left = Math.random()*(window.innerWidth-50)+"px";
    }
    requestAnimationFrame(drift);
  }
  drift();

  heart.addEventListener("click",()=>{
    heartsCollected++;
    heart.remove();
    counterEl.textContent=`Hearts collected: ${heartsCollected} / ${totalHearts}`;
    if(heartsCollected>=totalHearts){
      envelopeCard.style.display="block";
      gameCard.style.display="none";
      document.getElementById("envelope").classList.remove("locked");
    }
  });
}

for(let i=0;i<totalHearts;i++) spawnHeart();

// --- NO button with cat (untouchable) ---
const noBtn = document.getElementById("noBtn");
const btnContainer = document.querySelector(".button-container");
const dodgeDistance = 500;
if(noBtn){
  const cat = document.createElement("span");
  cat.textContent = "ğŸ±";
  cat.style.position="absolute";
  cat.style.fontSize = "24px";
  cat.style.top = "-28px";
  cat.style.left = "50%";
  cat.style.transform = "translateX(-50%)";
  noBtn.style.position = "relative";
  noBtn.appendChild(cat);

  // Cat bouncing
  let direction = 1;
  setInterval(() => {
    const top = parseFloat(cat.style.top.replace("px",""));
    if(top > -20 || top < -30) direction *= -1;
    cat.style.top = (top + direction*2) + "px";
  }, 100);

  // Untouchable: jumps instantly
  noBtn.addEventListener("mousemove", (e) => {
    const rect = noBtn.getBoundingClientRect();
    const cursorX = e.clientX;
    const cursorY = e.clientY;
    const btnCenterX = rect.left + rect.width / 2;
    const btnCenterY = rect.top + rect.height / 2;
    const dx = btnCenterX - cursorX;
    const dy = btnCenterY - cursorY;
    const distance = Math.sqrt(dx*dx + dy*dy);
    if(distance < 200){
      let newX = rect.left + (dx/distance) * dodgeDistance;
      let newY = rect.top + (dy/distance) * dodgeDistance;

      const containerRect = btnContainer.getBoundingClientRect();
      newX = Math.max(0, Math.min(containerRect.width - rect.width, newX - containerRect.left));
      newY = Math.max(0, Math.min(containerRect.height - rect.height, newY - containerRect.top));

      noBtn.style.left = newX + "px";
      noBtn.style.top = newY + "px";
    }
  });
}

// --- YES button magical ---
const yesBtn=document.getElementById("yesBtn");
if(yesBtn){
  yesBtn.classList.add("magical");

  // sparkles
  const sparkleCount=8;
  for(let i=0;i<sparkleCount;i++){
    const s=document.createElement("span");
    s.className="yes-sparkle";
    s.textContent="âœ¨";
    s.style.left=Math.random()*50+'%';
    s.style.top=Math.random()*50+'%';
    yesBtn.appendChild(s);
  }

  yesBtn.addEventListener("click",()=>{
    valentineCard.style.display="none";
    thankCard.style.display="block";
  });
}

// --- Envelope click ---
const envelope = document.getElementById("envelope");
envelope.addEventListener("click",()=>{
  if(!envelope.classList.contains("locked")){
    envelopeCard.style.display="none";
    valentineCard.style.display="block";
  }
});
</script>
</body>
</html>
