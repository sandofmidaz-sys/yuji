<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Mini-Game</title>
<style>
body {
  margin:0; padding:0;
  font-family:'Comic Sans MS', cursive;
  background: linear-gradient(135deg, #ffdee9, #b5fffc, #fddde6);
  overflow:hidden;
  height:100vh;
}

/* Card styling */
.card {
  position:absolute;
  top:50%; left:50%;
  transform: translate(-50%,-50%);
  width:450px; padding:30px;
  background:#ffe6f0; border-radius:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
  text-align:center;
  z-index:2;
}
.card h1 { font-size:1.6rem; margin-bottom:10px; }
.card p { font-size:1.2rem; margin-bottom:20px; }
.button-container { position:relative; height:80px; }

/* Buttons */
button {
  font-size:1rem;
  padding:10px 25px;
  border:none;
  border-radius:15px;
  cursor:pointer;
  position:absolute;
  transition: transform 0.2s ease;
}

/* YES button glow & pulse */
#yesBtn {
  background: linear-gradient(45deg,#ff7ac8,#b36bff);
  color:white;
  left:30%;
  top:10px;
  box-shadow:0 0 10px rgba(255,120,200,0.8),0 0 25px rgba(180,100,255,0.7), inset 0 0 8px rgba(255,255,255,0.4);
  animation: yesPulse 2.2s ease-in-out infinite;
}
@keyframes yesPulse {
  0% { box-shadow: 0 0 10px rgba(255,120,200,.6),0 0 25px rgba(180,100,255,.6); }
  50% { box-shadow: 0 0 25px rgba(255,120,200,1),0 0 45px rgba(180,100,255,1); }
  100% { box-shadow: 0 0 10px rgba(255,120,200,.6),0 0 25px rgba(180,100,255,.6); }
}
#yesBtn.clicked { animation: yesClickFX 0.45s ease forwards; }
@keyframes yesClickFX {
  0% { transform: scale(1); }
  40% { transform: scale(1.25); }
  70% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

/* NO button glow */
#noBtn {
  background:#ffcce0;
  color:#800040;
  left:70%;
  top:10px;
  box-shadow:0 0 12px rgba(255,150,200,0.6);
  z-index:5;
}
#noBtn span {
  font-size:32px;
  position:absolute;
  top:-34px;
  left:50%;
  transform:translateX(-50%);
  animation: catBounce .8s ease-in-out infinite;
}
@keyframes catBounce {
  0% { transform:translateX(-50%) translateY(0) rotate(-4deg); }
  50% { transform:translateX(-50%) translateY(-6px) rotate(4deg); }
  100% { transform:translateX(-50%) translateY(0) rotate(-4deg); }
}

/* Hearts */
.heart {
  position:absolute;
  font-size:30px;
  cursor:pointer;
  z-index:3;
  transition: transform 0.2s ease;
}
.heart.collect {
  animation: heartPop 0.35s ease forwards;
}
@keyframes heartPop {
  0% { transform: scale(1) rotate(0deg); opacity:1; }
  40% { transform: scale(1.6) rotate(20deg); }
  100% { transform: scale(0) rotate(90deg); opacity:0; }
}

/* Envelope */
#envelope {
  font-size:80px;
  cursor:pointer;
  transition: transform 0.5s ease;
}
#envelope.locked { filter:grayscale(80%); }

/* Floating emojis */
#floating { position:fixed; inset:0; pointer-events:none; z-index:1; }
.floating-emoji { position:absolute; }
</style>
</head>
<body>

<div id="floating"></div>

<!-- Mini-game -->
<div class="card" id="gameCard">
  <h1>Collect 20 hearts to unlock your envelope!</h1>
  <div id="counter">Hearts collected: 0 / 20</div>
</div>

<!-- Envelope -->
<div class="card" id="envelopeCard" style="display:none;">
  <div id="envelope" class="locked">ğŸ’Œ</div>
  <p>Click to open your Valentine!</p>
</div>

<!-- Valentine message -->
<div class="card" id="valentineCard" style="display:none; position:relative;">
  <h1>ğŸ’• Camille Anndrea Julgan Lebico, will you be my Valentine? :3</h1>
  <p>my treat hehe :3</p>
  <div class="button-container">
    <button id="yesBtn">YES! ğŸ’–</button>
    <button id="noBtn">NO ğŸ™ƒ<span></span></button>
  </div>
</div>

<!-- Thank you card -->
<div class="card" id="thankCard" style="display:none;">
  <h1>Thank you so much! ğŸ€</h1>
  <p>I promise you wonâ€™t regret it. ğŸ’–</p>
</div>

<script>
// Floating emojis
const floating = document.getElementById("floating");
const emojis = ['ğŸ’–','âœ¨','ğŸŒ¸','ğŸ’Œ','ğŸ±','ğŸ€','ğŸ¬','ğŸŒˆ','ğŸ˜»'];
for(let i=0;i<40;i++){
  const e=document.createElement('div');
  e.className='floating-emoji';
  e.textContent = emojis[Math.floor(Math.random()*emojis.length)];
  let x=Math.random()*innerWidth, y=Math.random()*innerHeight, a=Math.random()*5;
  e.style.fontSize=(Math.random()*18+22)+'px';
  floating.appendChild(e);
  (function drift(){
    y-=0.6; a+=0.01;
    if(y<-50){y=innerHeight+50; x=Math.random()*innerWidth;}
    e.style.transform=`translate(${x+Math.sin(a)*10}px,${y}px)`;
    requestAnimationFrame(drift);
  })();
}

// Mini-game hearts
let heartsCollected=0;
const counter=document.getElementById("counter");
const gameCard=document.getElementById("gameCard");
const envelopeCard=document.getElementById("envelopeCard");
const valentineCard=document.getElementById("valentineCard");
const thankCard=document.getElementById("thankCard");

for(let i=0;i<20;i++){
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="ğŸ’–";
  h.style.left=Math.random()*(innerWidth-40)+"px";
  h.style.top=Math.random()*(innerHeight-40)+"px";
  document.body.appendChild(h);

  (function move(){
    let y=parseFloat(h.style.top);
    y-=2.5;
    if(y<-50)y=innerHeight+50;
    h.style.top=y+"px";
    requestAnimationFrame(move);
  })();

  h.onclick=()=>{
    heartsCollected++;
    h.classList.add("collect");
    setTimeout(()=>h.remove(),300);
    counter.textContent=`Hearts collected: ${heartsCollected} / 20`;
    if(heartsCollected>=20){
      gameCard.style.display="none";
      envelopeCard.style.display="block";
      document.getElementById("envelope").classList.remove("locked");
    }
  };
}

// Envelope
document.getElementById("envelope").onclick=()=>{
  if(!document.getElementById("envelope").classList.contains("locked")){
    envelopeCard.style.display="none";
    valentineCard.style.display="block";
  }
};

// YES button animation
const yesBtn=document.getElementById("yesBtn");
yesBtn.onclick=()=>{
  yesBtn.classList.add("clicked");
  setTimeout(()=>{
    valentineCard.style.display="none";
    thankCard.style.display="block";
  },350);
};

// NO button with cat & jump (OFFSCREEN-PROOF, original style)
const noBtn=document.getElementById("noBtn");
const cat=noBtn.querySelector("span");

valentineCard.addEventListener("mousemove",(e)=>{
  const r=noBtn.getBoundingClientRect();
  const cardRect = valentineCard.getBoundingClientRect();

  const mouseX = e.clientX - cardRect.left;
  const mouseY = e.clientY - cardRect.top;

  const btnX = r.left - cardRect.left + r.width/2;
  const btnY = r.top - cardRect.top + r.height/2;

  const distance = Math.hypot(btnX - mouseX, btnY - mouseY);

  if(distance < 220){
    const padding = 10;

    // ORIGINAL random jump style
    let newX = Math.random() * valentineCard.clientWidth;
    let newY = Math.random() * valentineCard.clientHeight;

    // Clamp to keep inside card
    newX = Math.min(Math.max(padding, newX), valentineCard.clientWidth - r.width - padding);
    newY = Math.min(Math.max(padding, newY), valentineCard.clientHeight - r.height - padding);

    noBtn.style.left = newX + "px";
    noBtn.style.top = newY + "px";
  }
});
</script>
</body>
</html>
