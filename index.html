<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Mini-Game</title>

<style>
body {
  margin:0;
  padding:0;
  font-family:'Comic Sans MS', cursive;
  background: linear-gradient(135deg, #ffdee9, #b5fffc, #fddde6);
  overflow:hidden;
  height:100vh;
  position:relative;
}

/* Card styling */
.card {
  position:absolute;
  top:50%;
  left:50%;
  transform: translate(-50%,-50%);
  width:450px;
  padding:30px;
  background:#ffe6f0;
  border-radius:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
  text-align:center;
  z-index:2;
}

.card h1 { font-size:1.6rem; margin-bottom:10px; }
.card p { font-size:1.2rem; margin-bottom:20px; }

/* Buttons */
.button-container {
  position:relative;
  width:100%;
  height:80px;
}

.button-container button {
  font-size:1rem;
  padding:10px 25px;
  border:none;
  border-radius:15px;
  cursor:pointer;
  position:absolute;
  transition: transform 0.2s ease, background 0.3s ease;
}

#yesBtn {
  background: linear-gradient(45deg,#ff8ec7,#b57fff);
  color:white;
  box-shadow:0 5px 10px rgba(0,0,0,0.2);
  left:30%;
  top:10px;
}

#noBtn {
  background:#ffcce0;
  color:#800040;
  box-shadow:0 5px 10px rgba(0,0,0,0.2);
  left:70%;
  top:10px;
}

/* YES float */
@keyframes yesFloat {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}
#yesBtn.magical { animation: yesFloat 2s ease-in-out infinite; }

/* Hearts */
.heart {
  position:absolute;
  font-size:30px;
  cursor:pointer;
  user-select:none;
  z-index:3;
}

/* Envelope */
#envelope {
  font-size:80px;
  cursor:pointer;
  transition: transform 0.5s ease;
}
#envelope.locked { filter: grayscale(80%); }

/* Floating emojis */
#floating {
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}
.floating-emoji {
  position:absolute;
  will-change: transform;
}
</style>
</head>

<body>

<div id="floating"></div>

<!-- Mini-game -->
<div class="card" id="gameCard">
  <h1>Collect 20 hearts to unlock your envelope!</h1>
  <div id="counter">Hearts collected: 0 / 20</div>
</div>

<!-- Envelope -->
<div class="card" id="envelopeCard" style="display:none;">
  <div id="envelope" class="locked">ðŸ’Œ</div>
  <p>Click to open your Valentine!</p>
</div>

<!-- Valentine -->
<div class="card" id="valentineCard" style="display:none;">
  <h1>ðŸ’• Camille Anndrea Julgan Lebico, will you be my Valentine? :3</h1>
  <p>my treat hehe :3</p>
  <div class="button-container">
    <button id="yesBtn">YES! ðŸ’–</button>
    <button id="noBtn">NO ðŸ™ƒ</button>
  </div>
</div>

<!-- Thank you -->
<div class="card" id="thankCard" style="display:none;">
  <h1>Thank you so much! ðŸŽ€</h1>
  <p>I promise you wonâ€™t regret it. ðŸ’–</p>
</div>

<script>
/* ================= FLOATING EMOJIS (ONLY PART CHANGED) ================= */

const floating = document.getElementById("floating");
const emojis = ['ðŸ’–','âœ¨','ðŸŒ¸','ðŸ’Œ','ðŸ±','ðŸŽ€','ðŸ¬','ðŸŒˆ','ðŸ˜»','ðŸŽ¶','ðŸ­','ðŸ¦„','ðŸ¥°','ðŸ’'];
const FLOATING_COUNT = 40; // doubled

let mouseX = window.innerWidth / 2;
let mouseY = window.innerHeight / 2;

document.addEventListener("mousemove", e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

for (let i = 0; i < FLOATING_COUNT; i++) {
  const el = document.createElement("div");
  el.className = "floating-emoji";
  el.textContent = emojis[Math.floor(Math.random()*emojis.length)];

  let x = Math.random()*window.innerWidth;
  let y = Math.random()*window.innerHeight;
  let size = Math.random()*18 + 22;
  let speed = Math.random()*0.4 + 0.2;
  let sway = Math.random()*2 + 1;
  let angle = Math.random()*Math.PI*2;
  let rotation = Math.random()*360;
  let depth = Math.random()*0.6 + 0.4;

  el.style.fontSize = size + "px";
  el.style.opacity = Math.random()*0.2 + 0.8;

  floating.appendChild(el);

  function animate() {
    y -= speed * depth;
    angle += 0.01 * depth;
    rotation += 0.05 * depth;

    if (y < -60) {
      y = window.innerHeight + 60;
      x = Math.random()*window.innerWidth;
    }

    const parallaxX = (mouseX - window.innerWidth/2) * 0.002 * depth;
    const parallaxY = (mouseY - window.innerHeight/2) * 0.002 * depth;

    const swayX = Math.sin(angle) * sway;

    el.style.transform =
      `translate(${x + swayX + parallaxX}px, ${y + parallaxY}px)
       rotate(${rotation}deg)`;

    requestAnimationFrame(animate);
  }
  animate();
}

/* ================= REST OF YOUR ORIGINAL LOGIC (UNCHANGED) ================= */

const gameCard=document.getElementById("gameCard");
const envelopeCard=document.getElementById("envelopeCard");
const valentineCard=document.getElementById("valentineCard");
const thankCard=document.getElementById("thankCard");
const counterEl=document.getElementById("counter");
let heartsCollected=0;
const totalHearts=20;

function spawnHeart(){
  const heart=document.createElement("div");
  heart.className="heart";
  heart.textContent="ðŸ’–";
  heart.style.left=Math.random()*(window.innerWidth-50)+"px";
  heart.style.top=Math.random()*(window.innerHeight-50)+"px";
  document.body.appendChild(heart);

  let sway=(Math.random()*3-1.5), posY=parseFloat(heart.style.top);
  function drift(){
    posY -= 3;
    heart.style.top = posY + 'px';
    heart.style.left = parseFloat(heart.style.left) + sway;
    sway += (Math.random()*0.3-0.15);
    if(posY < -50){
      posY = window.innerHeight + 50;
      heart.style.left = Math.random()*(window.innerWidth-50)+"px";
    }
    requestAnimationFrame(drift);
  }
  drift();

  heart.addEventListener("click",()=>{
    heartsCollected++;
    heart.remove();
    counterEl.textContent=`Hearts collected: ${heartsCollected} / ${totalHearts}`;
    if(heartsCollected>=totalHearts){
      envelopeCard.style.display="block";
      gameCard.style.display="none";
      document.getElementById("envelope").classList.remove("locked");
    }
  });
}
for(let i=0;i<totalHearts;i++) spawnHeart();

const envelope=document.getElementById("envelope");
envelope.addEventListener("click",()=>{
  if(!envelope.classList.contains("locked")){
    envelopeCard.style.display="none";
    valentineCard.style.display="block";
  }
});

const yesBtn=document.getElementById("yesBtn");
yesBtn.classList.add("magical");
yesBtn.addEventListener("click",()=>{
  valentineCard.style.display="none";
  thankCard.style.display="block";
});

const noBtn=document.getElementById("noBtn");
const cat=document.createElement("span");
cat.textContent="ðŸ±";
cat.style.position="absolute";
cat.style.top="-28px";
cat.style.left="50%";
cat.style.transform="translateX(-50%)";
noBtn.appendChild(cat);

let dir=1;
setInterval(()=>{
  let t=parseFloat(cat.style.top);
  if(t<-35||t>-20) dir*=-1;
  cat.style.top=(t+dir*2)+"px";
},100);

document.addEventListener("mousemove",(e)=>{
  const rect=noBtn.getBoundingClientRect();
  const dx=(rect.left+rect.width/2)-e.clientX;
  const dy=(rect.top+rect.height/2)-e.clientY;
  if(Math.sqrt(dx*dx+dy*dy)<250){
    noBtn.style.left=Math.random()*(valentineCard.offsetWidth-rect.width)+"px";
    noBtn.style.top=Math.random()*(valentineCard.offsetHeight-rect.height-40)+40+"px";
  }
});
</script>
</body>
</html>
