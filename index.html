<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Adventure</title>
<style>
/* ----------------- BODY / BACKGROUND ----------------- */
body {
  margin: 0;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  background: linear-gradient(135deg, #ffeef2, #fce5f0, #fff0f5);
  overflow: hidden;
  text-align: center;
  height: 100vh;
}

/* ----------------- FLOATING EMOJIS ----------------- */
#floating-emojis div {
  position: fixed;
  font-size: 24px;
  pointer-events: none;
  transition: transform 0.05s linear;
}

/* ----------------- MINI-GAME HEARTS ----------------- */
.heart-float {
  position: absolute;
  font-size: 50px;
  cursor: pointer;
  user-select: none;
  transition: transform 0.2s;
}
.heart-float:hover { transform: scale(1.3); }

/* ----------------- HEART COUNTER ----------------- */
#heartCounter { font-size: 20px; color: #ff1f5c; margin-bottom: 10px; }

/* ----------------- ENVELOPE ----------------- */
#envelopeContainer {
  position: absolute;
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  width: 120px;
  height: 120px;
  cursor: default;
}

#envelopeWrapper { position: relative; display: inline-block; }
#envelope { font-size: 100px; cursor: pointer; transition: transform 0.5s ease, box-shadow 0.3s; }
#envelope:hover { transform: scale(1.1); box-shadow: 0 10px 25px rgba(255,0,128,0.3); }
#envelope.open { transform: rotateX(180deg); }

#chains {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  font-size: 60px;
  color: #555;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
  animation: shake 0.5s infinite alternate;
}
@keyframes shake {
  0% { transform: translateX(0px); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-5px); }
  100% { transform: translateX(0px); }
}

/* ----------------- MAIN CARD ----------------- */
.card {
  background: linear-gradient(135deg,#ffd0e1,#ffe0f5,#ffeefc);
  padding: 40px 30px;
  border-radius: 25px;
  max-width: 450px;
  margin: 50px auto;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}
.emoji-display { font-size: 40px; margin-bottom: 15px; }

/* ----------------- BUTTONS ----------------- */
.button-container { position: relative; margin-top: 20px; }

.button {
  padding: 15px 25px;
  border-radius: 50px;
  cursor: pointer;
  border: none;
  font-weight: bold;
  font-size: 18px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  position: relative;
}

.yes-button { 
  background: linear-gradient(135deg, #ff4d85, #a832c6);
  color: white;
}

.no-button { 
  background: #ffb3c9; 
  color: #ff1f5c;
  position: fixed;
}

#catRider {
  position: absolute;
  top: -25px;
  left: 0;
  font-size: 30px;
  pointer-events: none;
}

/* ----------------- CELEBRATION ----------------- */
#celebration h2 { font-size: 36px; color:#ff4d85; }
#celebration p { font-size: 20px; }

/* ----------------- HIDDEN ----------------- */
.hidden { display: none; }
</style>
</head>
<body>

<!-- Floating drifting emojis container -->
<div id="floating-emojis"></div>

<!-- Mini-game container -->
<div id="gameContainer">
  <h2>Collect 20 hearts to unlock your Valentine! üíñ</h2>
  <p id="heartCounter">Hearts collected: 0 / 20</p>
  <div id="heartsContainer"></div>

  <!-- Locked envelope -->
  <div id="envelopeContainer" class="locked">
    <div id="envelopeWrapper">
      <div id="envelope">üíå</div>
      <div id="chains">‚õìÔ∏èüîí‚õìÔ∏è</div>
    </div>
    <p>Collect all hearts first!</p>
  </div>
</div>

<!-- Main Valentine card -->
<div id="mainCard" class="hidden">
  <div class="card">
    <div class="emoji-display">üíï</div>
    <h1>Camille Anndrea Julgan Lebico, will you be my Valentine? :3 -Josh Daz</h1>
    <p>my treat hehe :3</p>
    <div class="button-container">
      <button id="yesButton" class="button yes-button">YES! üíñ</button>
      <button id="noButton" class="button no-button">No</button>
      <div id="catRider">üê±</div>
    </div>
  </div>
  <div id="celebration" class="hidden">
    <h2>YESSS!! üéâ</h2>
    <p>I'm so happy! Let's make it amazing!</p>
  </div>
</div>

<script>
// ----------------- ELEMENTS -----------------
const heartsContainer = document.getElementById("heartsContainer");
const envelopeContainer = document.getElementById("envelopeContainer");
const envelope = document.getElementById("envelope");
const chains = document.getElementById("chains");
const mainCard = document.getElementById("mainCard");
const yesButton = document.getElementById("yesButton");
const noButton = document.getElementById("noButton");
const catRider = document.getElementById("catRider");
const celebration = document.getElementById("celebration");
const floatingContainer = document.getElementById("floating-emojis");

let heartsCollected = 0;
const totalHearts = 20;

// ----------------- DRIFTING EMOJIS -----------------
const driftingEmojis = ['üíñ','‚ú®','üå∏','üíå','üê±','üéÄ','üç¨'];
function spawnDriftingEmoji() {
  const el = document.createElement('div');
  el.textContent = driftingEmojis[Math.floor(Math.random()*driftingEmojis.length)];
  el.style.left = Math.random()*window.innerWidth+'px';
  el.style.top = Math.random()*window.innerHeight+'px';
  el.style.fontSize = (Math.random()*24+20)+'px';
  el.style.opacity = Math.random()*0.8+0.2;
  floatingContainer.appendChild(el);

  let posY = parseFloat(el.style.top);
  let sway = Math.random()*2-1;
  let swayDirection = Math.random()<0.5?-1:1;

  function drift(){
    posY -= 0.5;
    let posX = parseFloat(el.style.left)+sway*swayDirection;
    el.style.top = posY+'px';
    el.style.left = posX+'px';
    sway += Math.random()*0.2-0.1;
    if(posY<-50) el.remove();
    else requestAnimationFrame(drift);
  }
  drift();
}
setInterval(spawnDriftingEmoji, 500);

// ----------------- HEART MINI-GAME -----------------
function spawnHearts(){
  for(let i=0;i<totalHearts;i++){
    const heart = document.createElement('div');
    heart.className = 'heart-float';
    heart.textContent = 'üíñ';
    heart.style.left = Math.random()*(window.innerWidth-50)+'px';
    heart.style.top = Math.random()*(window.innerHeight/2)+'px';
    heartsContainer.appendChild(heart);

    heart.addEventListener('click', ()=>{
      heart.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
      heart.style.transform = 'scale(2)';
      heart.style.opacity = '0';
      setTimeout(()=>heart.remove(), 300);

      heartsCollected++;
      document.getElementById('heartCounter').textContent = `Hearts collected: ${heartsCollected} / ${totalHearts}`;
      if(heartsCollected>=totalHearts){
        envelopeContainer.classList.remove('locked');
        chains.remove();
        envelopeContainer.querySelector('p').textContent = "Click the envelope to open your Valentine!";
      }
    });
  }
}
spawnHearts();

// ----------------- ENVELOPE OPEN -----------------
envelope.addEventListener('click', ()=>{
  if(envelopeContainer.classList.contains('locked')) return;
  envelope.classList.add('open');
  setTimeout(()=>{
    document.getElementById('gameContainer').classList.add('hidden');
    mainCard.classList.remove('hidden');

    // Celebration sparkle effect
    for(let i=0;i<50;i++){
      const sparkle = document.createElement('div');
      sparkle.textContent = driftingEmojis[Math.floor(Math.random()*driftingEmojis.length)];
      sparkle.style.position='fixed';
      sparkle.style.left = Math.random()*window.innerWidth+'px';
      sparkle.style.top = Math.random()*window.innerHeight+'px';
      sparkle.style.fontSize = (Math.random()*30+20)+'px';
      sparkle.style.transition='all 1s ease';
      document.body.appendChild(sparkle);
      setTimeout(()=>sparkle.remove(), 1000);
    }

  }, 600);
});

// ----------------- NO BUTTON DODGE & CAT RIDER -----------------
const dodgeDistance = 150;
noButton.style.left = "50px";
noButton.style.top = "300px";

noButton.addEventListener('mousemove',(e)=>{
  const rect = noButton.getBoundingClientRect();
  const cursorX = e.clientX;
  const cursorY = e.clientY;

  const btnCenterX = rect.left + rect.width/2;
  const btnCenterY = rect.top + rect.height/2;

  const dx = btnCenterX - cursorX;
  const dy = btnCenterY - cursorY;
  const distance = Math.sqrt(dx*dx+dy*dy);

  if(distance<100){
    let newX = rect.left + dx/distance*dodgeDistance;
    let newY = rect.top + dy/distance*dodgeDistance;

    newX = Math.max(10, Math.min(window.innerWidth - rect.width - 10, newX));
    newY = Math.max(10, Math.min(window.innerHeight - rect.height - 10, newY));

    noButton.style.left = newX+'px';
    noButton.style.top = newY+'px';

    // Move cat with button
    catRider.style.left = noButton.offsetLeft+'px';
    catRider.style.top = (noButton.offsetTop-25)+'px';
  }
});

// Initially position cat on NO button
catRider.style.left = noButton.offsetLeft+'px';
catRider.style.top = (noButton.offsetTop-25)+'px';

// ----------------- YES BUTTON CELEBRATION -----------------
yesButton.addEventListener('click', ()=>{
  celebration.classList.remove('hidden');
});
</script>

</body>
</html>
